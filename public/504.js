"use strict";(self.webpackChunklol=self.webpackChunklol||[]).push([[504],{9001:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var n=i(304),r=i(4234),s=i(8568),o=i(8261),l=i(537),a=i(5086),d=i(1527);const c=i.p+"52c8432c32edaaa85bce.m4a";function h(e){(0,r.qOq)(e,"svelte-1hrev6i",".example.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{display:flex;flex-direction:column}.example.svelte-1hrev6i>span.svelte-1hrev6i.svelte-1hrev6i{color:#474747;font-family:monospace;padding-bottom:6px}.container.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{--height:100px;display:flex;position:relative;height:var(--height);width:100%;background-color:#ededed;border-radius:24px}button.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{display:block;box-sizing:border-box;margin:15px 20px;padding:0px;background-color:transparent;color:white;border:none;outline:none}.bars.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{width:100%;position:relative;height:calc(100% - 30px);margin:15px 20px 15px 0}.bars.svelte-1hrev6i svg.svelte-1hrev6i.svelte-1hrev6i{height:100%;width:100%;stroke-width:5px;stroke-linecap:round}.bars.svelte-1hrev6i>svg.svelte-1hrev6i.svelte-1hrev6i{stroke:#c7c7c7}.bars.svelte-1hrev6i>div.svelte-1hrev6i.svelte-1hrev6i{position:absolute;top:0;left:0;width:100%;height:100%;clip-path:polygon(0 0, var(--dur) 0, var(--dur) 100%, 0% 100%);-webkit-clip-path:polygon(0 0, var(--dur) 0, var(--dur) 100%, 0% 100%)}.bars.svelte-1hrev6i>div.svelte-1hrev6i>svg.svelte-1hrev6i{stroke:#6360ff}.loading.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#ededed;border-radius:24px}.debug.svelte-1hrev6i.svelte-1hrev6i.svelte-1hrev6i{padding-top:6px;align-self:flex-end;color:#474747;font-family:monospace;z-index:1}")}function v(e){let t,i,n;return{c(){t=(0,r.bi5)("svg"),i=(0,r.bi5)("circle"),n=(0,r.bi5)("path"),(0,r.Ljt)(i,"cx","35"),(0,r.Ljt)(i,"cy","35"),(0,r.Ljt)(i,"r","35"),(0,r.Ljt)(i,"fill","#6360FF"),(0,r.Ljt)(n,"d","M49 31.54a4 4 0 010 6.92l-18 10.4a4 4 0 01-6-3.47V24.61a4 4 0\n            016-3.47l18 10.4z"),(0,r.Ljt)(n,"fill","#EDEDED"),(0,r.Ljt)(t,"width","70"),(0,r.Ljt)(t,"height","70"),(0,r.Ljt)(t,"viewBox","0 0 70 70"),(0,r.Ljt)(t,"fill","none"),(0,r.Ljt)(t,"xmlns","http://www.w3.org/2000/svg")},m(e,s){(0,r.$Tr)(e,t,s),(0,r.R3I)(t,i),(0,r.R3I)(t,n)},d(e){e&&(0,r.ogt)(t)}}}function u(e){let t,i,n,s;return{c(){t=(0,r.bi5)("svg"),i=(0,r.bi5)("circle"),n=(0,r.bi5)("rect"),s=(0,r.bi5)("rect"),(0,r.Ljt)(i,"cx","35"),(0,r.Ljt)(i,"cy","35"),(0,r.Ljt)(i,"r","35"),(0,r.Ljt)(i,"fill","#6360FF"),(0,r.Ljt)(n,"x","39"),(0,r.Ljt)(n,"y","20"),(0,r.Ljt)(n,"width","9"),(0,r.Ljt)(n,"height","30"),(0,r.Ljt)(n,"rx","4.5"),(0,r.Ljt)(n,"fill","#EDEDED"),(0,r.Ljt)(s,"x","22"),(0,r.Ljt)(s,"y","20"),(0,r.Ljt)(s,"width","9"),(0,r.Ljt)(s,"height","30"),(0,r.Ljt)(s,"rx","4.5"),(0,r.Ljt)(s,"fill","#EDEDED"),(0,r.Ljt)(t,"width","70"),(0,r.Ljt)(t,"height","70"),(0,r.Ljt)(t,"viewBox","0 0 70 70"),(0,r.Ljt)(t,"fill","none"),(0,r.Ljt)(t,"xmlns","http://www.w3.org/2000/svg")},m(e,o){(0,r.$Tr)(e,t,o),(0,r.R3I)(t,i),(0,r.R3I)(t,n),(0,r.R3I)(t,s)},d(e){e&&(0,r.ogt)(t)}}}function p(e){let t;return{c(){t=(0,r.bGB)("div"),(0,r.Ljt)(t,"class","loading svelte-1hrev6i")},m(e,i){(0,r.$Tr)(e,t,i)},d(e){e&&(0,r.ogt)(t)}}}function b(e){let t,i,n,s,o,l,a,c,h,b,g,f,L,w,x,j,m,R,y,I,E,B,G,T,O,D,k,z,F,$=e[1].matches("start")||e[1].matches("loading"),C=e[3].width+"",M=e[3].height+"";function S(e,t){return 2&t&&(l=null),null==l&&(l=!!e[1].matches("play")),l?u:v}let A=S(e,-1),W=A(e),X=$&&p();return{c(){t=(0,r.bGB)("div"),i=(0,r.bGB)("span"),i.textContent="WARNING: russian speech",n=(0,r.DhX)(),s=(0,r.bGB)("div"),o=(0,r.bGB)("button"),W.c(),a=(0,r.DhX)(),c=(0,r.bGB)("div"),h=(0,r.bi5)("svg"),b=(0,r.bi5)("path"),L=(0,r.DhX)(),w=(0,r.bGB)("div"),x=(0,r.bi5)("svg"),j=(0,r.bi5)("path"),I=(0,r.DhX)(),X&&X.c(),E=(0,r.DhX)(),B=(0,r.bGB)("div"),G=(0,r.fLW)(e[2]),T=(0,r.fLW)(" | "),O=(0,r.fLW)(C),D=(0,r.fLW)("x"),k=(0,r.fLW)(M),(0,r.Ljt)(i,"class","svelte-1hrev6i"),(0,r.Ljt)(o,"class","svelte-1hrev6i"),(0,r.Ljt)(b,"d",g=e[0].d),(0,r.Ljt)(h,"viewBox",f=e[0].box),(0,r.Ljt)(h,"class","svelte-1hrev6i"),(0,r.Ljt)(j,"d",m=e[0].d),(0,r.Ljt)(x,"viewBox",R=e[0].box),(0,r.Ljt)(x,"class","svelte-1hrev6i"),(0,r.czc)(w,"--dur",e[2]),(0,r.Ljt)(w,"class","svelte-1hrev6i"),(0,r.Ljt)(c,"class","bars svelte-1hrev6i"),(0,r.Ljt)(s,"class","container svelte-1hrev6i"),(0,r.Ljt)(B,"class","debug svelte-1hrev6i"),(0,r.Ljt)(t,"class","example svelte-1hrev6i")},m(l,v){(0,r.$Tr)(l,t,v),(0,r.R3I)(t,i),(0,r.R3I)(t,n),(0,r.R3I)(t,s),(0,r.R3I)(s,o),W.m(o,null),(0,r.R3I)(s,a),(0,r.R3I)(s,c),(0,r.R3I)(c,h),(0,r.R3I)(h,b),(0,r.R3I)(c,L),(0,r.R3I)(c,w),(0,r.R3I)(w,x),(0,r.R3I)(x,j),(0,r.R3I)(s,I),X&&X.m(s,null),(0,r.R3I)(t,E),(0,r.R3I)(t,B),(0,r.R3I)(B,G),(0,r.R3I)(B,T),(0,r.R3I)(B,O),(0,r.R3I)(B,D),(0,r.R3I)(B,k),z||(F=[(0,r.oLt)(o,"click",e[9]),(0,r.TVh)(y=d.S.call(null,c)),(0,r.oLt)(c,"resize",e[5])],z=!0)},p(e,[t]){A!==(A=S(e,t))&&(W.d(1),W=A(e),W&&(W.c(),W.m(o,null))),1&t&&g!==(g=e[0].d)&&(0,r.Ljt)(b,"d",g),1&t&&f!==(f=e[0].box)&&(0,r.Ljt)(h,"viewBox",f),1&t&&m!==(m=e[0].d)&&(0,r.Ljt)(j,"d",m),1&t&&R!==(R=e[0].box)&&(0,r.Ljt)(x,"viewBox",R),4&t&&(0,r.czc)(w,"--dur",e[2]),2&t&&($=e[1].matches("start")||e[1].matches("loading")),$?X||(X=p(),X.c(),X.m(s,null)):X&&(X.d(1),X=null),4&t&&(0,r.rTO)(G,e[2]),8&t&&C!==(C=e[3].width+"")&&(0,r.rTO)(O,C),8&t&&M!==(M=e[3].height+"")&&(0,r.rTO)(k,M)},i:r.ZTd,o:r.ZTd,d(e){e&&(0,r.ogt)(t),W.d(),X&&X.d(),z=!1,(0,r.j7q)(F)}}}function g(e,t,i){let n,h,v;const[u,p]=(0,d.o)({});(0,r.FIv)(e,u,(e=>i(3,v=e)));const b=(0,o.PX)(0,(e=>{let t;const i=n=>{e(n),t=window.requestAnimationFrame(i)};return i(0),()=>window.cancelAnimationFrame(t)}));let g=()=>{};const f=(0,o.fZ)("0%");(0,r.FIv)(e,f,(e=>i(2,h=e)));let L={};const w=(0,l.createMachine)({id:"player",initial:"start",context:{context:new(window.AudioContext||window.webkitAudioContext),audioBuffer:void 0,source:void 0,unsubscribe:void 0},states:{start:{on:{FETCH:"loading"}},loading:{entry:["load"],on:{RESOLVE:{target:"idle",actions:(0,l.assign)(((e,t)=>({...e,audioBuffer:t.audioBuffer})))}}},idle:{entry:["initStream"],on:{TOGGLE:{target:"play"}}},pause:{entry:["pause"],on:{TOGGLE:{target:"play"}}},play:{entry:["play","subOnEnd"],exit:["unsubOnEnd"],on:{TOGGLE:{target:"pause"}}}}}),{state:x,send:j}=(0,a.eO)(w,{actions:{load:({context:e})=>{const t=(n=e.decodeAudioData.bind(e),(...e)=>new Promise(((t,i)=>{Reflect.apply(n,void 0,[...e,e=>t(e),e=>i(e)])})));var n;window.fetch(new window.Request(c)).then((e=>e.arrayBuffer())).then((e=>t(e))).then((e=>({audioBuffer:e}))).then((({audioBuffer:e})=>{u.subscribe((({width:t,height:n})=>{t&&n&&i(0,L=function(e,{width:t,height:i,size:n=5,gap:r=1}){const s=~~((i-n)/2),o=~~((t-n+r)/(n+r)),l=e.length/o,a=~~(l/10)||1,d=e.getChannelData(0);let c=[],h=0;for(let e=0;e<o;e++){const t=~~(e*l),i=~~(t+l);let n=d[0];for(let e=t;e<i;e+=a){const t=d[e];n=Math.max(Math.abs(t),n)}h=Math.max(h,n),c[e]=n}return c=c.map((e=>~~(e/h*s))),{box:`0 -${~~(i/2)} ${t} ${i}`,d:c.map(((e,t)=>{const i=t*(n+r)+Math.ceil(n/2);return`M${i}, ${e} L${i}, ${-e}`})).join(" ")}}(e,{width:t,height:n}))})),j({type:"RESOLVE",audioBuffer:e})}))},initStream:({audioBuffer:e})=>{console.log("ready 💪🏻")},pause:(0,l.assign)((e=>{const{source:t,context:i}=e;return t.disconnect(i.destination),t.stop(),g(),{...e,source:void 0}})),play:(0,l.assign)((e=>{const{audioBuffer:t,context:i}=e,n=i.createBufferSource();n.buffer=t,n.connect(i.destination),n.start(0,0);const r=i.currentTime;return g=b.subscribe((()=>{const e=(i.currentTime-r)/t.duration*100;f.set(`${e.toFixed(2)}%`)})),{...e,source:n}})),subOnEnd:(0,l.assign)((e=>{const{source:t}=e,i=()=>j({type:"TOGGLE"});return t.addEventListener("ended",i),{...e,unsubscribe:()=>t.removeEventListener("ended",i)}})),unsubOnEnd:({unsubscribe:e})=>{e&&e()}}});return(0,r.FIv)(e,x,(e=>i(1,n=e))),(0,s.H3)((()=>{j("FETCH")})),[L,n,h,v,u,p,f,x,j,()=>j("TOGGLE")]}class f extends r.f_C{constructor(e){super(),(0,r.S1n)(this,e,g,b,r.N8,{},h)}}const L=f,w=(0,n.G)(L)},1527:(e,t,i)=>{i.d(t,{S:()=>r,o:()=>s});var n=i(8261);const r=e=>{const t=t=>e.dispatchEvent(new window.CustomEvent("resize",{detail:{size:t}}));if(void 0!==window.ResizeObserver){const i=new window.ResizeObserver((e=>{const i={width:Math.round(e[0].contentRect.width),height:Math.round(e[0].contentRect.height)};t(i)}));return i.observe(e),{destroy(){i.unobserve(e)}}}{const i=()=>{const i=e.getBoundingClientRect(),n={width:Math.round(i.width),height:Math.round(i.height)};t(n)};let n=setTimeout((()=>{i(),n=setInterval(i,2e3)}),10);return{destroy(){clearInterval(n)}}}},s=e=>{const t=(0,n.fZ)(e);return[t,e=>t.set(e.detail.size)]}},304:(e,t,i)=>{i.d(t,{G:()=>n});const n=e=>()=>{const t=document.createElement("div");return new e({target:t}),t}}}]);